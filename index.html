
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carrito Deportivo</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
    .carrito, .cliente-info { background: #fff; border-radius: 10px; padding: 20px; margin-bottom: 20px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    h2 { margin-top: 0; }
    .producto { display: flex; justify-content: space-between; margin: 10px 0; }
    .total { font-weight: bold; }
    .btn { background: #8b0000; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; }
    .btn:hover { background: #a00000; }
    .toast { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: #333; color: #fff; padding: 10px 20px; border-radius: 5px; display: none; }
  </style>
</head>
<body>

  <div class="carrito">
    <h2>Carrito de Compras</h2>
    <div id="cart-items"></div>
    <div class="total">Subtotal: <span id="subtotal">$ 0.00 USD</span></div>
    <div class="total">Total: <span id="total">$ 0.00 USD</span></div>
  </div>

  <div class="cliente-info">
    <h2>Datos del Cliente</h2>
    <input type="text" id="cliente-nombre" placeholder="Nombre completo" style="width: 100%; margin-bottom: 10px;"><br>
    <input type="text" id="cliente-telefono" placeholder="Tel√©fono" style="width: 100%; margin-bottom: 10px;"><br>
    <textarea id="cliente-direccion" placeholder="Direcci√≥n completa" style="width: 100%; margin-bottom: 10px;"></textarea><br>
    <textarea id="note" placeholder="Notas adicionales" style="width: 100%; margin-bottom: 10px;"></textarea><br>
    <select id="payment" style="width: 100%; margin-bottom: 10px;">
      <option>Efectivo</option>
      <option>Transferencia</option>
      <option>Pago en el Exterior</option>
    </select>
    <button class="btn" id="checkout">Enviar pedido por WhatsApp</button>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    let cart = [
      { name: "Optimum Nutrition - Creatina Monohidratada 120 servicios", price: 50, qty: 1 },
      { name: "Force Factor - Creatina Monohidratada 60 Servicios", price: 30, qty: 1 }
    ];

    const renderCart = () => {
      const container = document.getElementById('cart-items');
      container.innerHTML = '';
      let subtotal = 0;
      cart.forEach(item => {
        subtotal += item.price * item.qty;
        const div = document.createElement('div');
        div.className = 'producto';
        div.innerHTML = `<span>${item.name} x${item.qty}</span><span>$ ${(item.price * item.qty).toFixed(2)} USD</span>`;
        container.appendChild(div);
      });
      document.getElementById('subtotal').textContent = `$ ${subtotal.toFixed(2)} USD`;
      document.getElementById('total').textContent = `$ ${subtotal.toFixed(2)} USD`;
    };

    const showToast = (msg) => {
      const toast = document.getElementById('toast');
      toast.textContent = msg;
      toast.style.display = 'block';
      setTimeout(() => toast.style.display = 'none', 3000);
    };

    document.getElementById('checkout').onclick = () => {
      if(!cart.length) return showToast('Carrito vac√≠o');

      const method = document.getElementById('payment').value;
      const name = document.getElementById('cliente-nombre').value.trim();
      const phone = document.getElementById('cliente-telefono').value.trim();
      const addr = document.getElementById('cliente-direccion').value.trim();
      const note = document.getElementById('note').value.trim();

      if(!name || !phone || !addr) return showToast('Completa todos los datos del cliente');

      const now = new Date();
      const fecha = now.toLocaleDateString('es-ES');
      const hora = now.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
      const pedidoID = `${now.getFullYear()}${String(now.getMonth()+1).padStart(2,'0')}${String(now.getDate()).padStart(2,'0')}${String(now.getHours()).padStart(2,'0')}${String(now.getMinutes()).padStart(2,'0')}`;

      const subtotal = document.getElementById('subtotal').textContent;
      const total = document.getElementById('total').textContent;
      const costoEnvio = "$ 0.00 USD";

      const items = cart.map(i =>
        `x${i.qty} ${i.name}   $ ${(i.price * i.qty).toFixed(2)} USD`
      ).join('%0A');

      let msg = `¬°Hola!%0A%0A` +
                `N√∫mero de pedido: ${pedidoID}%0A%0A` +
                `üóìÔ∏è Fecha: ${fecha}%0A` +
                `üïê Hora: ${hora}%0A%0A` +
                `üë§ Informaci√≥n del cliente%0A` +
                `Nombre: ${name}%0A` +
                `Tel√©fono: ${phone}%0A%0A` +
                `üè† El pedido se llevar√° a domicilio:%0A%0A` +
                `üìç Direcci√≥n%0A${addr}%0A%0A` +
                `üìù Pedido%0A%0A${items}%0A%0A` +
                `üí≤ Costos%0A%0A` +
                `Total parcial: ${subtotal} USD%0A` +
                `Costo de env√≠o: ${costoEnvio}%0A` +
                `M√©todo de Pago: ${method}%0A%0A` +
                `Costo total: ${total} USD%0A%0A`;

      if(note) msg += `‚úèÔ∏è Notas del cliente:%0A${encodeURIComponent(note)}%0A%0A`;

      msg += `üëÜ Env√≠a este mensaje para crear tu pedido.`;

      window.open(`https://wa.me/5353264753?text=${msg}`, '_blank');
      showToast('Abriendo WhatsApp...');
    };

    renderCart();
  </script>
</body>
</html>
